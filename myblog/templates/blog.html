{% extends "base.html" %}
{% block title %}BigKola Blog{%endblock%}
{% block content %}


 
<style>
.span7,.well{	
	background-color:#fff;
	border-radius:5px;
	border-top:thin solid #dddddd;
	border-bottom:thin solid #dddddd;
}
h2{
	text-shadow: 2px 2px 2px #ccc;
	font-family:"Microsoft YaHei" sans-serif;
}
.theblog{
	border-top:thin solid #dddddd;
	padding:5px 10px;
}
.title{color:#336699}


.thewhite{
	margin:10px;
	border-bottom:thin solid #dddddd;
}
.sub{
	margin-right:15px;
	text-align:right;
}

.the_message{
	padding-top:5px;
	border-top:thin solid #dddddd;
}
#message_time{
	text-align:right;
}
#message_time a{
	font-size:10px;
}
.mainblog{
	margin-top:60px;
}
.main_8{
	background-color:#fff;
	border-radius:5px;
}
.full_text{
	margin-bottom:10px;
	text-align:right;
}
.full_text a:hover
{text-decoration:none;}
	.the_message_text{
	table-layout:fixed; 
	word-break: break-all;
	overflow:hidden; 
}
#content{
word-break: break-all;
}
</style>

<div class="container mainblog">
  <div class="row">
    <div class="span8 main_8">
	  <div class="blog_img">
	     <img src="{{STATIC_URL}}images/blog.png"> 
	  </div>	
	  {% if thelist %} 
		{% for blog,content,num in contacts %}
			<div class="theblog">
			  <ul class="nav nav-list">
			    <li class="nav-header">
				 <div>
  				  <h2>
				    <a href="/blog/{{blog.id}}" class="title">
				      {{blog.title}} 
				    </a>
				  </h2>	 
				 </div> 
				  {%if blog.author%}
				  <p>
					<strong>&nbsp;<a href="#">•&nbsp;via:{{blog.author}}</a></strong> 
					&nbsp;&nbsp;|&nbsp;&nbsp; <span><a href="#">{{num}}评论</a></span> 
				  </p>	
				  {%else%}
				  <p>
				    <strong>&nbsp;<a href="#">•&nbsp;via:admin</a></strong>
					&nbsp;&nbsp;|&nbsp;&nbsp;<span><a href="#">{{num}}评论</a></span>
				  </p>	
				  {%endif%}
				</li>
				<p id="content">       {{content|safe}}  <br>	</p>
				
				 
				  <div class="full_text">
				    <a href="/blog/{{blog.id}}" id="full_text_{{blog.id}}"> 阅读全文 </a>
					<style>
					#full_text_{{blog.id}}{
						padding:5px 10px;
						background-color:#f3f3f3;
					}
					</style>
					<script>
					$(document).ready(function(){
					  $("#full_text_{{blog.id}}").mouseover(function(){
						$("#full_text_{{blog.id}}").css("background-color","#0033FF");
						$("#full_text_{{blog.id}}").css("color","white");
					  });
					  $("#full_text_{{blog.id}}").mouseout(function(){
						$("#full_text_{{blog.id}}").css("background-color","#f3f3f3");
						$("#full_text_{{blog.id}}").css("color","#0088cc");
					  });
					});
					</script>
				  </div>   
	 
				
			  </ul>
			</div>
		{% endfor %}
	  {%else%}
		<p>No Blog</p>
	  {%endif%}  
	  
	  
	<style>
	.page{
	margin:5px auto 25px 20px;
	}
	</style>
      <div class="page">
        {% if contacts.has_previous %}
		
            <a href="?page={{ contacts.previous_page_number }}" class="has_previous">上一页</a>
			<span class="has_center">
            &nbsp;| &nbsp; <strong>{{ contacts.number }} / {{ contacts.paginator.num_pages }}</strong>
			</span>
			{% if contacts.has_next %}
			 &nbsp;| &nbsp;<a  class="has_next" href="?page={{ contacts.next_page_number }}">下一页</a>
			{% endif %}
		{%else%}
			{% if contacts.has_next %}
			    <a href="?page={{ contacts.next_page_number }}">→查看更多</a>
			{%else%}
			        <span>
            <a href="#"> {{ contacts.number }} / 共{{ contacts.paginator.num_pages }}页</a>
					</span>
			{% endif %}
		{% endif %}
      </div>	  
	</div>
	
	<div class="span4">
		<div class="well sidebar-nav">
				<ul class="nav nav-list">
				  <li class="nav-header">帝国友情链接：</li>
				  <li class="active">
				    <a href="http://wickedonna2.tumblr.com/">
					老卢的Tumblr
					</a>
				  </li>
				  <li>
				    <a href="http://t66y.com/">
					1024
					</a>
				  </li>
				  <li>
				    <a href="https://thepiratebay.se/">
					海盗湾
					</a>
				  </li>
				  <li>
				    <a href="http://weekly.manong.io/">
					码农周刊
					</a>
				  </li>
				  <li>
					<a href="https://www.python.org/">
					Python
					</a>
				  </li>
				  <li>
				    <a href="http://www.bootcss.com/">
					Bootstrap
					</a>
				  </li>
				  <li>
				    <a href="http://www.google.com/ncr">
					Google
					</a>
				  </li>
			   </ul>
		</div><!--/.well -->
	<!--=======SNS================================-->	
			   
		<div class="well">

			 <ul class="nav nav-list">
			   <li class="nav-header">分享到SNS：</li>
			 <li>
				<div class="go">	   
				<!-- 将此标记放置在你希望显示+1 按钮的位置。 -->
				  <div class="g-plusone" data-annotation="inline" data-width="300"></div>

				<!-- 将此标记放置在最后一个 +1 按钮 标记之后。 -->
				  <script type="text/javascript">
					  window.___gcfg = {lang: 'zh-CN'};

					  (function() {
						var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
						po.src = 'https://apis.google.com/js/platform.js';
						var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
					  })();
				  </script>
				</div><!-- end google +1。 -->
			 </li>

			<li>	
				<div class="sina">
				  <html xmlns:wb=“http://open.weibo.com/wb”>
				  <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8">
				  </script>
				  <wb:share-button appkey="3n3Yax" addition="number" type="button" 
				  ralateUid="3874142518" default_text="欢迎光临帝国！"></wb:share-button>
				</div><!-- end sina 。 -->
			</li>	

			<li class="thewhite"></li>

			<li class="nav-header">添加BigKola的微信：</li>	
			<li id="myweixin">
				<img src="{{STATIC_URL}}images/weixin.png" alt="我的微信" />
			</li>
				
			</ul>	
		</div><!-- end SNS分享。 -->


		<div class="reply_message">
				<form class="well" action=/message/ method="post">
				  <ul class="nav nav-list">
					<li class="nav-header">快速留言：</li>
					<li>
					<fieldset>
					{%csrf_token%}
					  <label>姓名（可选）：</label>
					  <input type="text" class="span3" placeholder="Type Name…" name="name">
					
					{% if errors%}
					{% for error in errors %}
					  <div class="alert alert-error">
						<a class="close" data-dismiss="alert">×</a>
						<strong>警告!</strong> {{error}}
					  </div>
					{%endfor%}
					
					{%endif%}
					
					  <label>留言内容：</label>
					  <div class="controls">
						<textarea class="span3" id="textarea" rows="7" placeholder="Type Message…" 
						  maxlength="10000" name="message"></textarea>
					  </div>
				  
					  <div class="sub">
						<button type="submit" class="button button-rounded button-flat-primary button-small" id="message_button">提交留言</button>
					  </div>			
					</fieldset>	
					</li>
				  </ul>
				</form>
		</div>	
		
		
	<!--=======留言板================================-->	

		<div class="well">
		  <ul class="nav nav-list">
			 <li class="nav-header">帝国最新留言：</li>
			{%if messages%}
			{% for message,text in messages %}
			<li>
			  <div class="the_message">
			    <p>
					{% if message.name%}
						帝国公民：<a href="#">{{message.name}}</a>留言说：
					{% else %}
						<a>匿名</a>留言：
					{%endif%}
				</p>
				{%if text%}
					<p class="the_message_text">{{text|safe}}<p>
				{% else %}
					<p>......</p>
				{%endif%}
				
			  <p id="message_time">
				<a href=/message/>{{message.pub_date|date:"Y年m月d日 H时i分"}}</a>
			  </p>

			  </div>
			</li>
		{% endfor %}
		{%else%}
		  <strong>暂时还无人留言.</strong>
		{%endif%}
		</div>

		

	</div><!-- end span4。 -->
  </div><!-- end row。 -->
</div><!-- end container。 -->




{%endblock%}